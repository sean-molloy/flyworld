//handles gross toilet stuff

function showToilet(this Character*)
{
  gToilet.X = this.x - Game.Camera.X +25;
  gToilet.Y = this.y - Game.Camera.Y - 60;
  gToilet.Visible = true;
  btnPiss.NormalGraphic = 28-(this.GetProperty("bladder")*7)+873;
  btnShit.NormalGraphic = 28-(this.GetProperty("stomach")*7)+902;
}
 
function hideToilet()
{
  //called from global
  gToilet.Visible = false;
  currentlyPissing = false;   
}

function piss(this Character*)
{
  if(this.GetProperty("bladder"))
  {
    this.showToilet();
    btnPiss.Animate(19, this.GetProperty("bladder"), 1, eOnce);
    this.SetProperty("bladder", 0);
    currentlyPissing = true;
  } else {
    this.Say("I don't need to go.");
  }
}

function shit(this Character*)
{
  if(this.GetProperty("stomach"))
  {
    this.showToilet();
    btnShit.Animate(20, this.GetProperty("stomach"), 1, eOnce);
    this.SetProperty("stomach", 0);
    currentlyPissing = true;
  } else {
    this.Say("I don't want to go!");
  }
}

function pooWees(this Character*)
{
  if(this.GetProperty("stomach") + this.GetProperty("bladder") > 0)
  {
    this.showToilet();
    btnShit.Animate(20, this.GetProperty("stomach"), 1, eOnce);
    btnPiss.Animate(19, this.GetProperty("bladder"), 1, eOnce);
    this.SetProperty("stomach", 0);
    this.SetProperty("bladder", 0);  
    currentlyPissing = true;
  } else {
    this.Say("I don't need to...");
  }
}

/********************************Health bar stuff******************************/

function init_Health()
{
  btnHealthBar.NormalGraphic = 18;
  gHealth.Visible = false;  
}

function showHealth(this Character*)
{
  aLifebar.Play(eAudioPriorityNormal, eOnce);
  
  btnHealthBar.Width = this.GetProperty("HP") + 1;
  //btnHealthBar.NormalGraphic = getHPFrame(this.GetProperty("HP"));
  //btnHealthBar.NormalGraphic = 50 - this.GetProperty("HP") + 1376;
  gHealth.X = this.x - Game.Camera.X - 27;
  gHealth.Y = this.y - Game.Camera.Y - 80;
  gHealth.Visible = true;
  SetTimer(1, 100);
  healthIsHiding = true; 
  player.StopMoving();
}


function addHealth(this Character*, int amountToAdd)
{
  int prevHP = this.GetProperty("HP");
  if(prevHP == 50 && amountToAdd > 0)
  {
    //already full health, health bar can flash or something, different sound effect
  } else {
    int newHP = prevHP + amountToAdd;
    if(newHP < 5)
    {
      newHP = 2;
      //this is where a character will faint and wake up in hospital
    } else if (newHP > 50)
    {
      newHP = 50;
    }
    btnHealthBar.Width = this.GetProperty("HP") + 1;
    gHealth.X = this.x - Game.Camera.X - 27;
    gHealth.Y = this.y - Game.Camera.Y - 80;
    gHealth.Visible = true;
    SetTimer(1, 100);
    healthIsHiding = true;   
    btnHealthBar.TweenSize(1.0, newHP + 1, btnHealthBar.Height, eEaseOutCubicTween, eNoBlock, 0.2);
    this.SetProperty("HP", newHP);
  }
}

  function hideHealth()
{
  gHealth.TweenTransparency(0.1, 100, eEaseInSineTween, eBlockTween);
  gHealth.Visible = false;
  gHealth.Transparency = 0;
}
