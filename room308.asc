// room script file

function room_Load()
{
    cGhostl.ChangeRoom(308);
  cGhostl.Transparency = 100;
  cGhostl.SpeechColor = cJohnsMouth.SpeechColor;
  cGhostl.SpeechView = cJohnsMouth.SpeechView;
  Game.Camera.SetAt(300, 0);
}
int counter = 0;
bool blinkingAllowed = true;
int dryEyes = 50;
function abiBlink()
{
  if(blinkingAllowed)
  {  
    counter++;
    if(counter == dryEyes)
    {
      oAbiBlink.Visible = true;
      
    } else if (counter == dryEyes + 8)
    {
      oAbiBlink.Visible = false;
      dryEyes = 50 + Random(100);
      counter = 0;
    }
  }
}
function johnSays(String heSays)
{
  cGhostl.SayAtSync(5, 60, 100,  heSays);
}


function abiSays(String abiSaid)
{
  
  cAbiMouth.SayAtSync(260, 60, 100, abiSaid);   
  
}
function room_AfterFadeIn()
{
    Game.Camera.TweenX(30.0, 127, eEaseLinearTween, eNoBlockTween);
      johnSays("&1 Problem, Abigeil?");
      WaitSeconds(0.2);
      oAbisBrows.TweenY(0.3, 47, eEaseOutCubicTween, eNoBlock);
      abiSays("&1 No...");      
      oAbisBrows.TweenY(0.7, 53, eEaseOutCircTween, eNoBlockTween);
      abiSays("&2 ...Just checking.");    
      
      johnSays("&2 Sorry,");
      johnSays("&3 I realise I made that sound like a question,");
      oAbisBrows.TweenY(0.3, 63, eEaseOutCircTween, eNoBlockTween);
      johnSays("&4 but it was actually meant to be a statement.");
      
      abiSays("&3 What did you trying to say?");      
      johnSays("&5 Problem, Abigail.");
      johnSays("&6 Problem.");
      oAbisBrows.TweenY(0.1, 57, eEaseOutCircTween, eNoBlockTween);
      
      abiSays("&4 Problem?");
      johnSays("&7 Hmmm...");
}


function late_repeatedly_execute_always()
{
  abiBlink();
}