// room script file

function moveBackgroundObject(Object* theObject,  int xPosition,  float distance)
{
  theObject.X = xPosition + FloatToInt((IntToFloat(Game.Camera.X) / distance));
}
function late_repeatedly_execute_always()
{
  moveBackgroundObject(oClouds, 240, 2.0);
  moveBackgroundObject(oFence, 359, 7.0);
  moveBackgroundObject(oHouse, 370, 6.0);
}
function region1_WalksOnto()
{
  Game.Camera.StopAllTweens();
  HandyHelper.memorizeCamPos();
  player.ChangeRoom(eRooms_FlatKitchen, player.x, player.y);
}

function region2_WalksOnto()
{
  Game.Camera.StopAllTweens();
  HandyHelper.memorizeCamPos();
  player.ChangeRoom(eRooms_FlatHallway);
}

function changePlayerTime(){
             
  }

function caskFloor()
{
  if(oWineCask.Visible)
  {
    RemoveWalkableArea(2);
  }
}

function room_Load()
{ 
  changePlayerLocaleOnRoomEnter();
  Phone.adjustPhoneVolumeWhilstRinging();
  resumeMusicAfterCHCH(aFlat_theme);
  caskFloor();
  
  
  if(characterChange)
  {    
    resumeMusicAfterCHCH(aFlat_theme);              
    Game.Camera.SetAt(309,  0);     
  } else {
    Game.Camera.SetAt(HandyHelper.recallCamX(), HandyHelper.recallCamY());   
  } 
}

function room_AfterFadeIn()
{
 if(characterChange)
 {
   characterChange = false;
   flashPlayer();
 } else {  
  Game.Camera.TweenPosition(1.0,  309,  0,  eEaseInOutSineTween, eNoBlock);  
 }
  Follow.followStand(490, 118);
  if(followed){
    int otherPlayer = Find.whichRoomIsOtherOne();
  if( otherPlayer == 2 )
    {    
      Follow.followFrom(565, 170, 1);
    } else {
      Follow.followFrom(482, 194, 5);
    }
  }
  Follow.followMe(3);
}



function hHallExit_AnyClick()
{
  switch (verbUsed)
  {
    case 0: //walk
      player.GoTo(483, 195);
    break;
    case 1://look
      lookAbiPaul("That way back to the hall!", 
                  "The hallway is through there.");
    break;
    case 2://use
      Canned.noUsing();
    break;
    case 3://talk
      Canned.noTalking();
    break;
    case 4://move
      Canned.noMoving();
    break;
    case 5://fourletters
      Canned.fuckAnyone();
    break;
    case 6://take
      Canned.cantTake();
    break;
    case 7://inv
      Canned.wontWork();
    break;
  }
}


function hKitchenExit_AnyClick()
{
  switch (verbUsed)
  {
    case 0: //walk
      player.GoTo(569, 169);
    break;
    case 1://look
      lookAbiPaul("That way to the kitchen!", 
                  "The kitchen is through there.");
    break;
    case 2://use
      Canned.noUsing();
    break;
    case 3://talk
      Canned.noTalking();
    break;
    case 4://move
      Canned.noMoving();
    break;
    case 5://fourletters
      Canned.fuckAnyone();
    break;
    case 6://take
      Canned.cantTake();
    break;
    case 7://inv
      Canned.wontWork();
    break;
  }
}

function hRedCouch_AnyClick()
{
  switch (verbUsed)
  {
    case 0: //walk
      walkToAndFace(418, 155, eDirectionLeft, 409, 168);            
    break;
    case 1://look
      lookAbiPaul("This old red couch is not as comfortable as it looks.", 
                  "Dad slept on this couch every single night of my parents marriage.");
    break;
    case 2://use
      player.angry();
      player.Say("sit in the couch.");
    break;
    case 3://talk
      
      Canned.noTalking();
    break;
    case 4://move
    
      lookAbiPaul("I probably could push this couch, but I won't.", 
                  "Nah... I can't be bothered pushing the couch.");
    break;
    case 5://fourletters
      if(IsPlayerAbi)
      {
        Canned.fuckAnyone();
      } else {
      Canned.fuckAnyone(0, true);
      }
    break;
    case 6://take
      Canned.cantTake();
    break;
    case 7://inv
      Canned.wontWork();
    break;
  }
}

function hgreenCouch_AnyClick()
{
  switch (verbUsed)
  {
    case 0: //walk
      walkToAndFace(485, 155, eDirectionUp, 513, 155);      
    break;
    case 1://look
      lookAbiPaul("This saggy old green couch is far more comfortable than it looks!", 
                  "I bought this couch on trademe for $7.20!");
    break;
    case 2://use      
      Canned.bothSayToEachOther("FOOD!","BOOZE!");
    break;
    case 3://talk
      
      player.Say(String.Format("Paul's mum's number is %s! And don't forget it!"), PHpaulsMum);
     // Canned.noTalking();
    break;
    case 4://move
      lookAbiPaul("I don't want to rearrange the furniture.", 
                  "There's no reason to push the couch.");
    break;
    case 5://fourletters
      Canned.fuckAnyone();
    break;
    case 6://take
      Canned.cantTake();
    break;
    case 7://inv
      Canned.wontWork();
    break;
  }
}

function hTelevision_AnyClick()
{
  switch (verbUsed)
  {
    case 0: //walk
      walkToAndFace(432, 170, eDirectionDown, 457, 170);      
    break;
    case 1://look
      player.FaceLocation(436, 200, eBlock);
      lookAbiPaul("I've had this TV for ages.", 
                  "Good old television.");
    break;
    case 2://use
      player.Say("turn on TV");
    break;
    case 3://talk
      Canned.noTalking();//different response when tv is turned on
    break;
    case 4://move
      Canned.noMoving();
    break;
    case 5://fourletters
      Canned.fuckAnyone();
    break;
    case 6://take
      Canned.cantTake();
    break;
    case 7://inv
      Canned.wontWork();
    break;
  }
}

function hWindow_AnyClick()
{
switch (verbUsed)
  {
    case 0: //walk
      walkToAndFace(474, 116, eDirectionUp,504, 116);          
    break;
    case 1://look
      lookAbiPaul("What a beautiful day/night", "Nice day/night");
    break;
    case 2://use
      Canned.noUsing();
    break;
    case 3://talk
      Canned.noTalking();
    break;
    case 4://move
      Canned.noMoving();
    break;
    case 5://fourletters
      Canned.fuckAnyone();
    break;
    case 6://take
      Canned.cantTake();
    break;
    case 7://inv
      Canned.wontWork();
    break;
  }
  verbUsed = 0;

}

function oWineCask_AnyClick()
{

  switch (verbUsed)
  {
    case 0: //walk
      walkToAndFace(536, 156, eDirectionUpLeft, 552, 168);

    break;
    case 1://look
      player.FaceLocation(525, 144, eBlock);
      lookAbiPaul("It's a wine cask.", "it's G-Man's cask of wine.");
    break;
    case 2://use
      Canned.noUsing();
    break;
    case 3://talk
      Canned.noTalking();
    break;
    case 4://move
      Canned.noMoving();
    break;
    case 5://fourletters
      Canned.fuckAnyone();
    break;
    case 6://take
      player.Walk(536, 156, eBlock, eWalkableAreas);
      player.FaceDirection(eDirectionUpLeft);
      player.AddInventory(iWineCask);
      displayAlert(eAlertInvPickup, false, iWineCask);
      oWineCask.Visible = false;
      RestoreWalkableArea(2);
    break;
    case 7://inv
      Canned.wontWork();
    break;
  }
  verbUsed = 0;

}

function room_Leave()
{
HandyHelper.memorizeCamPos();
}
