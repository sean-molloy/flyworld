// new module script

bool currentlyStepping = false;
int counter = 0;
int stepSpeed = 1;

static void FootSteps::playStep()
{
  
  switch(Random(5))
  {
    case 0:
      aStep1.Play(eAudioPriorityNormal, eOnce);
    break;
    case 1:
      aStep2.Play(eAudioPriorityNormal, eOnce);
    break;
    case 2:
      aStep3.Play(eAudioPriorityNormal, eOnce);
      
    break;
    case 3:
      aStep4.Play(eAudioPriorityNormal, eOnce);
    break;
    case 4:
      aStep5.Play(eAudioPriorityNormal, eOnce);
    break;
    case 5:
      aStep6.Play(eAudioPriorityNormal, eOnce);
    break;  
  }
}

function repStep()
{
  if(currentlyStepping)
  {
    counter++;
    if(counter == stepSpeed)
    {
      FootSteps.playStep();
      counter = 0;
    }
  }
}

static void FootSteps::start(int theSpeed)
{
  stepSpeed = theSpeed;
  FootSteps.playStep();
  currentlyStepping = true;
}

static void FootSteps::stop()
{
  //play scuff sound
  aStep1.Stop();
  aStep2.Stop();
  aStep3.Stop();
  aStep4.Stop();
  aStep5.Stop();
  aStep6.Stop();
  aScuff.Play(eAudioPriorityNormal, eOnce);
  counter = 0;
  currentlyStepping = false;
}

bool landLeavingStepsHappening = false;

function stopLandSteps()
{
  landStepsChannel.Stop();
  landStepsChannel.Volume = 100;
  //aFrontDoorSlammedReal.Play(eAudioPriorityHigh, eOnce);
  landLeavingStepsHappening = false;
  
}
float timeForSteps = 1.0;

function landLeavingSteps()
{
  if(landLeavingStepsHappening)
  {
    if(landStepsChannel !=null)
    {
      
      if(landStepsChannel.Volume == 20)
      {
        stopLandSteps();
      }
    }
  }
}




static void FootSteps::startLandSteps(float timing)
{
  landLeavingStepsHappening = true;
  timeForSteps = timing;
  landStepsChannel = aLandFootBoth.Play(eAudioPriorityHigh, eRepeat);
  //landStepsChannel.TweenFadeOut(timeForSteps, eEaseLinearTween, eNoBlockTween);
  landStepsChannel.TweenVolume(timeForSteps, 20, eEaseLinearTween, eNoBlockTween);
}

function repeatedly_execute_always()
{
  landLeavingSteps();
  repStep();
}