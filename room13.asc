// room script file

function findCameraPositionAfterCharacterChange()
{ 
  characterChange = false;
  switch(findPlayer())
  {
    case 1:
      Game.Camera.SetAt(306, 0);
    break;
    case 2:
      Game.Camera.SetAt(524, 0);
    break;
    case 3:
      Game.Camera.SetAt(707, 0);
    break;
    default:
      Game.Camera.SetAt(306, 0);
    break;
    
    
  }
}

function findCameraPosition()
{
  if(player.PreviousRoom == 12)
  {
    Game.Camera.SetAt(0, 0);
  } else if (player.PreviousRoom == 14)
  {
    Game.Camera.SetAt(925, 0);
  } else {
    findCameraPositionAfterCharacterChange();
  }
}


function room_Load()
{
  changePlayerLocaleOnRoomEnter();
  resumeMusicAfterCHCH(aEndlessOffice);
  findCameraPosition();
  if(characterChange)
  {
    characterChange = false;
  }
}

function room_AfterFadeIn()
{
  if(player.PreviousRoom == 12)
  {
    Game.Camera.TweenX(1.0, 306, eEaseInOutSineTween, eNoBlockTween);
    player.Walk(1009, player.y, eNoBlock);
  } else if (player.PreviousRoom == 14)
  {
    Game.Camera.TweenX(1.0, 707, eEaseInOutSineTween, eNoBlockTween);
    player.Walk(326, player.y, eNoBlock);
  }
}

/****************Scrolling Stuff******************************************************************/

int wasHere = 0;

function region2_WalksOff()
{
  wasHere = 2;
}

function region2_WalksOnto()
{
  if(wasHere == 3)
  {
    Game.Camera.TweenX(1.0, 306, eEaseInOutSineTween, eNoBlockTween);
    wasHere = 0;
  }
}

function region3_WalksOff()
{
  wasHere = 3;
}

function region3_WalksOnto()
{
  if(wasHere == 2)
  {
    Game.Camera.TweenX(1.0, 524, eEaseInOutSineTween, eNoBlockTween);
    wasHere = 0;
  }
}

function region4_WalksOff()
{
  wasHere = 4;
}

function region4_WalksOnto()
{
  if(wasHere == 5)
  {
    Game.Camera.TweenX(1.0, 524, eEaseInOutSineTween, eNoBlockTween);
    wasHere = 0;
  }  
}

function region5_WalksOff()
{
  wasHere = 5;
}

function region5_WalksOnto()
{
  if(wasHere == 4)
  {
    Game.Camera.TweenX(1.0, 707, eEaseInOutSineTween, eNoBlockTween);
    wasHere = 0;
  }
}

/******************Change Rooms***********************************************************************/


function region1_WalksOnto()
{
  player.ChangeRoom(12, player.x + 250, player.y);
}

function region6_WalksOnto()
{
  player.ChangeRoom(14, player.x - 707, player.y);
}
