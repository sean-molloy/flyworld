// room script file

function findCameraPositionAfterCharacterChange()
{ 
  characterChange = false;
  switch(findPlayer())
  {
    case 1:
      Game.Camera.SetAt(306, 0);
    break;
    case 2:
      Game.Camera.SetAt(524, 0);
    break;
    case 3:
      Game.Camera.SetAt(707, 0);
    break;
    default:
      Game.Camera.SetAt(306, 0);
    break;
    
    
  }
}

function findCameraPosition()
{
  if(player.PreviousRoom == eRooms_Omni_CorridorLeft)
  {
    Game.Camera.SetAt(0, 0);
  } else if (player.PreviousRoom == eRooms_Omni_CorridorRight)
  {
    Game.Camera.SetAt(925, 0);
  } else {
    findCameraPositionAfterCharacterChange();
  }
}


function room_Load()
{
  changePlayerLocaleOnRoomEnter();
  resumeMusicAfterCHCH(aEndlessOffice);
  findCameraPosition();
  if(characterChange)
  {
    characterChange = false;
  }
}

function room_AfterFadeIn()
{
  if(player.PreviousRoom == eRooms_Omni_CorridorLeft)
  {
    Game.Camera.TweenX(1.0, 306, eEaseInOutSineTween, eNoBlockTween);
    player.Walk(1009, player.y, eNoBlock);
  } else if (player.PreviousRoom == eRooms_Omni_CorridorRight)
  {
    Game.Camera.TweenX(1.0, 707, eEaseInOutSineTween, eNoBlockTween);
    player.Walk(326, player.y, eNoBlock);
  }
  aMuffledVoices.Play(eAudioPriorityHigh, eRepeat);
}

/****************Scrolling Stuff******************************************************************/

int wasHere = 0;

function region2_WalksOff()
{
  wasHere = 2;
}

function region2_WalksOnto()
{
  if(wasHere == 3)
  {
    Game.Camera.TweenX(1.0, 306, eEaseInOutSineTween, eNoBlockTween);
    wasHere = 0;
  }
}

function region3_WalksOff()
{
  wasHere = 3;
}

function region3_WalksOnto()
{
  if(wasHere == 2)
  {
    Game.Camera.TweenX(1.0, 524, eEaseInOutSineTween, eNoBlockTween);
    wasHere = 0;
  }
}

function region4_WalksOff()
{
  wasHere = 4;
}

function region4_WalksOnto()
{
  if(wasHere == 5)
  {
    Game.Camera.TweenX(1.0, 524, eEaseInOutSineTween, eNoBlockTween);
    wasHere = 0;
  }  
}

function region5_WalksOff()
{
  wasHere = 5;
}

function region5_WalksOnto()
{
  if(wasHere == 4)
  {
    Game.Camera.TweenX(1.0, 707, eEaseInOutSineTween, eNoBlockTween);
    wasHere = 0;
  }
}

/******************Change Rooms***********************************************************************/


function region1_WalksOnto()
{
  player.ChangeRoom(eRooms_Omni_CorridorLeft, player.x + 250, player.y);
}

function region6_WalksOnto()
{
  player.ChangeRoom(eRooms_Omni_CorridorRight, player.x - 707, player.y);
}

/**************************INTERACTION ***********************************************************/

function hHall2_AnyClick()
{

switch (verbUsed)
{
  case 0: //walk

    player.Walk(1030, 174);
  break;
  case 1://look
    player.FaceDirection(eDirectionRight);
    lookAbiPaul("More hallway through there.", 
                "This place is endless!");
  break;
  case 2://use
    noUsing();
  break;
  case 3://talk
    noTalking();
  break;
  case 4://move
    noMoving();
  break;
  case 5://fourletters
    fuckAnyone();
  break;
  case 6://take
    cantTake();
  break;
  case 7://inv
    wontWork();
  break;
}
verbUsed = 0;

}

function hHall1_AnyClick()
{

switch (verbUsed)
{
  case 0: //walk

    player.Walk(322, 171);
  break;
  case 1://look
    player.FaceDirection(eDirectionLeft);
    lookAbiPaul("More hallway through there.", 
                "This place is endless!");
  break;
  case 2://use
    noUsing();
  break;
  case 3://talk
    noTalking();
  break;
  case 4://move
    noMoving();
  break;
  case 5://fourletters
    fuckAnyone();
  break;
  case 6://take
    cantTake();
  break;
  case 7://inv
    wontWork();
  break;
}
verbUsed = 0;

}

/*****************************Question Generator**********************************************************/

int clauseOneType;
String makeFirstCause()
{
  String clause;
   
  switch(clauseOneType)
  {
    case 0:        
      switch(Random(1))
      {
        case 0:
        clause = "Have ";
        break;
        case 1:
        clause = "Haven't ";
        break;       
      }
    break;
    case 1:
      switch(Random(2))
      {
        case 0:
        clause = "When ";
        break;
        case 1:
        clause = "How ";
        break;   
        case 2:
        clause = "";
        break;
        
      }  
    break;
  }
  return clause;
}

String makeSecondClause()
{
  String clause;
  switch(clauseOneType)
  {
    case 0:
      switch(Random(1))
      {
        case 0:
        clause = "you ever experienced";
        break;
        case 1:
        clause = "you noticed";
        break; 
      }
    break;
    case 1:
    switch(Random(3))
      {
        case 0:
        clause = "was the last time";
        break;
        case 1:
        clause = "did you notice";
        break;    
        case 2:
        clause = "is it possible";
        break;
        case 3:
        clause = "many times";
        break;
      }
    break;
  }
  return clause;  
}
String makeThirdClause()
{
  String clause;
  switch(Random(8))
  {
    case 0:
    clause = "cats";
    break;
    case 1:
    clause = "windows";
    break;
    case 2:
    clause = "beans";
    break;
    case 3:
    clause = "fish";
    break;
    case 4:
    clause = "eyes";
    break;
    case 5:
    clause = "strangers";
    break;
    case 6:
    clause = "your parents";
    break;
    case 7:
    clause = "your best friends";
    break;
    case 8:
    clause = "your nanna and poppa";
    break;
  }
  return clause;
}

String makeForthClause()
{
  String clause;
  switch(clauseOneType)
  {
    case 0:
      switch(Random(5))
      {
        case 0:
        clause = "falling from";
        break;
        case 1:
        clause = "due to";
        break;    
        case 2:
        clause = "climbing into";
        break;
        case 3:
        clause = "cascading from";
        break;
        case 4:
        clause = "pouring over";
        break;
        case 5:
        clause = "eating all of";
        break;
      }
    break;
    case 1:
      switch(Random(3))
      {
        case 0:
        clause = "were seen inside";
        break;
        case 1:
        clause = "have been climbing into";
        break; 
        case 2:
        clause = "were talking about";
        break;
        case 3:
        clause = "going away to";
        break;
      }
    break;
  }
  return clause;  
}

String makeFifthClause()
{
  String clause;
  switch(Random(12))
  {
    case 0:
    clause = "the sky";
    break;
    case 1:
    clause = "your mouth";
    break;
    case 2:
    clause = "the post-box";
    break;
    case 3:
    clause = "the sound of my voice";
    break;
    case 4:
    clause = "the glowing vortex";
    break;
    case 5:
    clause = "the disappointing way your life has turned out";
    break;
    case 6:
    clause = "the excitement of a new day";
    break;
    case 7:
    clause = "a lonely heron";
    break;
    case 8:
    clause = "a vigorous pigeon";
    break;
    case 9:
    clause = "a lovely holiday";
    break;
    case 10:
    clause = "the tea kettle";
    break;
    case 11:
    clause = "the gallery";
    break;
    case 12:
    clause = "a really trendy party";
    break;
  }
  return clause;  
}
String makeSentence()
{
    clauseOneType = Random(1);

  String sentence =  String.Format("%s%s %s %s %s?", makeFirstCause(), makeSecondClause(), makeThirdClause(), 
  makeForthClause(), makeFifthClause());
  return capitaliseSentence(sentence);
}

function hHotspot4_AnyClick()
{
  player.Say("%s",makeSentence());
}

function room_Leave()
{
  aMuffledVoices.Stop();
}
