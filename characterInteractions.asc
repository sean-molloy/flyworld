// All Character Interactions

int standAtX;
int standAtY;

function findStandingSpot(Character* targetChar, Character* theChar)
{
  int x = targetChar.x;
  int y = targetChar.y;
  int destX = x;
  int destY = y;
  
  int distance = 30;
  
  if(targetChar.x <= theChar.x)                            //if standing right of target
  {
    if(GetWalkableAreaAtRoom(x + distance, y))            //can stand to the right of target
    {
      destX += distance;
    } else if (GetWalkableAreaAtRoom(x - distance, y))    //or stand to the left of target
    {
      destX -= distance;
    } else {                                               //if cant go right or left, do these:
      if(targetChar.y >= theChar.y)                        //if standing north of target
      {
        if(GetWalkableAreaAtRoom(x, y - distance))        //can stand north of target
        {
          destY -= distance;
        } else if (GetWalkableAreaAtRoom(x, y + distance)) //or stand south of target
        {
          destY += distance;
        } else {                                           //or remain in original position
          destX = theChar.x;
          destY = theChar.y;
        }
      } else {                                            //if standing south of target
        if(GetWalkableAreaAtRoom(x, y + distance))        //stand south
        {
          destY += distance;
        } else if (GetWalkableAreaAtRoom(x, y - distance))//or stand north
        {
          destY -= distance;
        } else {                                           //or remain in original position
          destX = theChar.x;
          destY = theChar.y;
        }
        
      }
    }
  
  } else {                                                  //if standing left of target
      if(GetWalkableAreaAtRoom(x - distance, y))            //stand left
    {
      destX -= distance;                    
    } else if (GetWalkableAreaAtRoom(x + distance, y))      //or stand right
    {
      destX += distance;
    } else {                                              //or do these
      if(targetChar.y >= theChar.y)                        //if standing north of target
      {
        if(GetWalkableAreaAtRoom(x, y - distance))        //can stand north of target
        {
          destY -= distance;
        } else if (GetWalkableAreaAtRoom(x, y + distance)) //or stand south of target
        {
          destY += distance;
        } else {                                           //or remain in original position
          destX = theChar.x;
          destY = theChar.y;
        }
      } else {                                            //if standing south of target
        if(GetWalkableAreaAtRoom(x, y + distance))        //stand south
        {
          destY += distance;
        } else if (GetWalkableAreaAtRoom(x, y - distance))//or stand north
        {
          destY -= distance;
        } else {                                           //or remain in original position
          destX = theChar.x;
          destY = theChar.y;
        }
        
      }
      
    }  
  }
  standAtX = destX;
  standAtY = destY;
}


//give a character this thing (from the other lead character)
function Give(Character* theChar, InventoryItem* theItem)
{
  int abiInvView = theItem.GetProperty("iGiveAbiView");
  int paulInview = theItem.GetProperty("iGivePaulView");
  
  int giveView;
  int receiveView;
  
  Character* otherChar;
  if(theChar == cAbi)
  {
    otherChar = cPaul;
    giveView = paulInview;
    receiveView = abiInvView;
  } else {
    otherChar = cAbi;
    giveView = abiInvView;
    receiveView = paulInview;
  }
  
  findStandingSpot(theChar, otherChar);
  otherChar.Walk(standAtX, standAtY, eBlock);
  otherChar.FaceCharacter(theChar);
  theChar.FaceCharacter(otherChar);
  
  theChar.LockView(receiveView);
  otherChar.LockView(giveView);
  
  otherChar.Animate(otherChar.Loop, 4, eOnce, eBlock, eForwards);
  otherChar.UnlockView();

  theChar.Animate(theChar.Loop, 4, eOnce, eBlock, eBackwards);
    theChar.UnlockView();
  
  otherChar.LoseInventory(theItem);
  theChar.AddInventory(theItem);
  //have a whole procedure in here which includes animation for giving stuff.
  //character needs to walk closer to the other character.
  //inv items contain the animation for the character taking thing out of pocket and reaching out
  //you simply reverse the other chars view for receiving an item
}


static void Character_Interact::Paul_interact()
{

 switch (verbUsed)
  {
    case 0: //walk
      if(IsPlayerAbi)
      {
        player.Walk( cPaul.x +10 , cPaul.y + 5  );        
      } else {
        player.Walk( mouse.x + Game.Camera.X, mouse.y + 5 + Game.Camera.Y );
      }
    break;
    case 1://look
     if(IsPlayerAbi){
      player.FaceCharacter(cPaul);
      player.Say("That's Paul.");
    }else{
      if(zoomedOut){
      player.Say("I'm looking good today.");
      } else {
        cPaul.showHealth();
      }
    }
    break;
    case 2://use
      if(IsPlayerAbi)
      {
        switchProtagonist();
      } else {
        player.Say("Use me!");
      }
    break;
    case 3://talk
    if(IsPlayerAbi)
    {
      if(cPaul.distanceToCharacter(cAbi) < 20)
      {
        cAbi.Say("HEY PAUL!");
        cPaul.Say("Why are you so close?");
      } else {
     dAbiToPaul.Start();
      }
    } else
    {
      switch(Random(3)){
        case 0:
        StartCutscene(eSkipESCOrRightButton);
        player.Say("How am I doing, me?");
        player.Say("Not so good, not so good.");
        player.Say("Yeah...");
        player.Say("I know.");
        WaitMouseKey(20);
        player.Say("*sigh*");
        EndCutscene();
        break;
        case 1:
        player.Say("Why do I do these things?");
        break;
        case 2:
        player.Say("*sigh*");
        break;
        case 3:
        player.Say("Hello?");
        break;
      }
    }
    break;
    case 4://move
      lookAbiPaul("He's gotta learn to push himself at some stage.",
                  "Dancing time.");
    break;
    case 5://fourletters
      if(IsPlayerAbi)
      {
        StartCutscene(eSkipESCOrRightButton);
        cAbi.awkward();
        player.Say("Nah... We don't do that.");
        cAbi.cool();
        cPaul.FaceCharacter(cAbi);
        cPaul.Say("Do what?");
        cAbi.FaceCharacter(cPaul);
        WaitMouseKey(50);
        player.Say("It."); //FUck?
        WaitMouseKey(120);
        cPaul.angry();
        cPaul.Say("Huh.");
        WaitMouseKey(30);
        cPaul.Say("Yeah, I didn't say anything!");
        cPaul.cool();
        EndCutscene();
      } else {
        player.Say("Maybe later...");
      }
    break;
    case 6://take
      if(IsPlayerAbi)
      {
      Canned.cantTakePerson();
      } else {
        player.Say("It's not the right place to take off my clothes.");
      }
    break;
    case 7://inv
    StartCutscene(eSkipESCOrRightButton);
    if(player.ActiveInventory == iPills){
      if(IsPlayerAbi)
      {       
        player.Say("Here you go!");
        Give(cPaul, iPills);
      } else {
        player.Say("yum yum, now I feel much better!");
        cPaul.addSanity(20);
      }
    } else if (player.ActiveInventory == iPaulsCard){
      if(IsPlayerAbi)
      {
        cAbi.Say("Hey Paul, here's your eftpos card!");
        Give(cPaul, iPaulsCard);  
        cPaul.Say("Thanks!");
             
      } else {
        cPaul.Say("Surprisingly flavoursome.");
      }
    } else if (player.ActiveInventory == iAbiCard){
    if(IsPlayerAbi)
    {
      
      cAbi.FaceCharacter(cPaul);
      cAbi.Say("You can use my eftpos card,");
      cPaul.FaceCharacter(cAbi);      
      cAbi.Say("But give it straight back!");
      Give(cPaul, iAbiCard); 
      cPaul.Say("Okay!");
                 
    } else {
      cPaul.Say("It tastes clean.");
    } 
    } else if (player.ActiveInventory == iTypewriter){
      if(IsPlayerAbi)
      {
        
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("Hey thanks for borrowing me your typewriter.");
        cPaul.angry();
        Give(cPaul, iTypewriter); 
        cPaul.Say("I LENT you my typewriter.");
        cPaul.cool();
        cAbi.awkward();
        cAbi.Say("Yeah... Thanks.");
        cAbi.cool();
               
        
      } else {
        cPaul.Say("If I'm gonna do any typing, I'm gonna need to put this down somewhere.");
      }
    } else if(player.ActiveInventory == iKeyCard)
    {
      if(IsPlayerAbi)
      {
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("Hey Paul!");
        cPaul.FaceCharacter(cAbi);
        cPaul.Say("Yeah?");
        cAbi.Say("Want this keycard?");
        cPaul.Say("Sure, sounds good.");
        Give(cPaul, iKeyCard);        
      } else {
        
      }
    } else if(player.ActiveInventory == iBeeperAbi)
    {
      if(IsPlayerAbi)
      {
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("Hey Paul!");
        cPaul.FaceCharacter(cAbi);
        cPaul.Say("Yeah?");
        cAbi.Say("Want this beeper?");
        cPaul.Say("Sure, sounds good.");
        Give(cPaul, iBeeperAbi);        
      } else {
        
      }
    }else if(player.ActiveInventory == iToiletPaper)
    {
      if(IsPlayerAbi)
      {
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("Hey Paul!");
        cPaul.FaceCharacter(cAbi);
        cPaul.Say("Yeah?");
        cAbi.Say("Want this toilet paper?");
        cPaul.Say("Sure, sounds good.");
        Give(cPaul, iToiletPaper);        
      } else {
        
      }
    }else if(player.ActiveInventory == iMug)
    {
      if(IsPlayerAbi)
      {
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("Hey Paul!");
        cPaul.FaceCharacter(cAbi);
        cPaul.Say("Yeah?");
        cAbi.Say("Want this mug?");
        cPaul.Say("Sure, sounds good.");
        Give(cPaul, iMug);        
      } else {
        
      }
    }else if(player.ActiveInventory == iCoffeeBlack)
    {
      if(IsPlayerAbi)
      {
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("Hey Paul!");
        cPaul.FaceCharacter(cAbi);
        cPaul.Say("Yeah?");
        cAbi.Say("Want some coffee?");
        cPaul.Say("Sure, sounds good.");
        Give(cPaul, iCoffeeBlack);        
      } else {
        cPaul.drink(iCoffeeBlack, iMug); 
      }
    }else if(player.ActiveInventory == iCoffeeLatte)
    {
      if(IsPlayerAbi)
      {
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("Hey Paul!");
        cPaul.FaceCharacter(cAbi);
        cPaul.Say("Yeah?");
        cAbi.Say("Want some coffee?");
        cPaul.Say("Sure, sounds good.");
        Give(cPaul, iCoffeeLatte);        
      } else {
        cPaul.drink(iCoffeeLatte, iMug);  
      }
    }else if(player.ActiveInventory == iMilk)
    {
      if(IsPlayerAbi)
      {
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("Hey Paul!");
        cPaul.FaceCharacter(cAbi);
        cPaul.Say("Yeah?");
        cAbi.Say("Want milk?");
        cPaul.Say("Sure, sounds good.");
        Give(cPaul, iMilk);
        
      } else {
        cPaul.drink(iMilk);

      }
    }else if(player.ActiveInventory == iMugMilk)
    {
      if(IsPlayerAbi)
      {
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("Hey Paul!");
        cPaul.FaceCharacter(cAbi);
        cPaul.Say("Yeah?");
        cAbi.Say("Want milk?");
        cPaul.Say("Sure, sounds good.");
        Give(cPaul, iMilk);        
      } else {
        cPaul.drink(iMugMilk, iMug);
      }
    } else if (player.ActiveInventory == iCakeSlice)
    {
      if(IsPlayerAbi)
      {
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("Hey Paul!");
        cPaul.FaceCharacter(cAbi);
        cPaul.Say("Yeah?");
        cAbi.Say("Want some cake?");
        cPaul.Say("Sure, sounds good.");
        Give(cPaul, iCakeSlice);
      } else {
        cPaul.eatFood(iCakeSlice);
      }
    }
    EndCutscene();
    break;
  }
  verbUsed = 0;
}

static void Character_Interact::Abi_interact()
{      
  switch (verbUsed)
  {
    case 0: //walk
       if(IsPlayerAbi)
      {        
        player.Walk( mouse.x + Game.Camera.X, mouse.y + 5 + Game.Camera.Y, eNoBlock, eWalkableAreas );
      } else {
        player.Walk( cAbi.x + 10, cAbi.y + 5 );        
      }
      /*
      if(cPaul.Room == cAbi.Room)
      {
        cPaul.Walk(cAbi.x, cAbi.y, eNoBlock);
      }*/
    break;
    case 1://look                  
       if(IsPlayerAbi){
     if(zoomedOut){
       player.Say("I can't really see myself without a mirror.");
       //should there be another function which tells the player the location?
     } else {
      cAbi.showHealth();
     }
    }else{
      player.FaceCharacter(cAbi, eBlock);
      player.Say("That's Abi.");
    }
    break;
    case 2://use
      if(IsPlayerAbi)
      {
        player.Say("I think I am using myself already?");
      } else {
        switchProtagonist();
      }
    break;
    case 3://talk
      if(IsPlayerAbi)
  {
    switch(Random(3)){
      case 0:
        player.Say("You got this, Abigail!");
      break;
      case 1:
        player.Say("Looking good!");
      break;
      case 2:
        player.Say("It's all gonna be okay.");
      break;
      case 3:
        player.Say("Relax!");
      break;
    }
  } else {
    if(cAbi.distanceToCharacter(cPaul) < 20)
    {
      cPaul.Say("Hey Abi!");
      WaitSeconds(0.3);
      cAbi.Say("Just take a few steps back please.");
    } else {
      dPaulToAbi.Start();
    }
  }
    break;
    case 4://move
        lookAbiPaul("It's dancing time.","I don't think I could move her");
    break;
    case 5://fourletters
      if(IsPlayerAbi)
      {
        player.awkward();
        player.Say("Let's get some candles, draw a bath, chuck on some enya and I'll have a go.");
        player.cool();
      } else {
        StartCutscene(eSkipESCOrRightButton);
        player.FaceDirection(eDirectionDown);
        player.Say("I reckon we're kind of like brother and sister.");
        cAbi.FaceCharacter(cPaul);
        cAbi.Say("What?");
        player.Say("Um, you know...");
        WaitMouseKey(40);
        player.FaceCharacter(cAbi);
        player.Say("Like how we're not really 'into' each other?");
        WaitMouseKey(50);
        cAbi.Say("Ah...");
        WaitMouseKey(100);
        cAbi.Say("Yeah...");
        EndCutscene();
      }
    break;
    case 6://take
      if(IsPlayerAbi)
      {
        player.Say("This is not the time of place to take my clothes off!");
      } else {
        Canned.cantTakePerson(false);
      }
    break;
    case 7://inv
    StartCutscene(eSkipESCOnly);
    if(player.ActiveInventory == iPills){
    if(IsPlayerAbi)
      {
        player.Say("Ew, no way!");
      } else {          
        player.Say("Here you go!");
        Give(cAbi, iPills);
        cAbi.Say("Thanks!");
        cAbi.awkward();
        cAbi.Say("I guess...");
        cAbi.cool();
      }
    } else if (player.ActiveInventory == iKeyCard)
    {
      if(IsPlayerAbi)
      {
        player.Say("I don't need to unlock myself.");
      } else {
        
        cPaul.FaceCharacter(cAbi, eBlock);
        cPaul.Say("Hey Abi!");
        cAbi.FaceCharacter(cPaul, eBlock);
        cAbi.Say("Uh huh?");
        cPaul.Say("Here's the key-card back!");
        cAbi.Say("Oh yeah.");
        cAbi.Say("Thanks!");
        Give(cAbi, iKeyCard);
        
      }
    } else if (player.ActiveInventory == iPaulsCard) 
    {
      if(IsPlayerAbi)
      {
        cAbi.Say("I'm not doing anything weird with Paul's eftpos card.");
        cAbi.Say("It smells bad.");
      } else {
        cPaul.Say("Hey Abi, take my eftpos card!");
        cAbi.awkward();
        cAbi.Say("Thanks, you shouldn't have.");
        cAbi.cool();
        Give(cAbi, iPaulsCard);
        
      }
    
    } else if (player.ActiveInventory == iAbiCard) {
      if(IsPlayerAbi)
      {
        cAbi.Say("I wish I could pay myself.");
      } else {
        cPaul.Say("Here's your card back!");
        cAbi.Say("Cheers.");
        Give(cAbi, iAbiCard);
        
      }
    } else if (player.ActiveInventory == iTypewriter){
      if(IsPlayerAbi)
      {       
        cAbi.Say("Nah, Paul would loose it if he knew I was actually USING this thing!");
      } else {        
        cPaul.FaceCharacter(cAbi, eBlock);
        cPaul.Say("Abi.");
        cAbi.FaceCharacter(cPaul, eBlock);
        WaitMouseKey(20);
        cPaul.Say("I'm going to allow you to hold onto my typewriter for a while.");
        cPaul.Say("Please don't use it!");
        cPaul.Say("It's the only expensive thing I own.");
        cAbi.awkward();
        cAbi.Say("Yeah sure, I'll carry your heavy crap around, no worries.");
        cAbi.cool();
        Give(cAbi, iTypewriter);                
      } 
    } else if (player.ActiveInventory == iBeeperAbi)
      {
        if(IsPlayerAbi)
        {
          Beepers.showAbisBeeper();
        } else {
          
          cPaul.FaceCharacter(cAbi, eBlock);
          cPaul.Say("Hey Abi!");
          cAbi.FaceCharacter(cPaul, eBlock);
          cAbi.Say("Yip?");
          cPaul.Say("Here's your beeper back!");
          Give(cAbi, iBeeperAbi);
          cAbi.Say("Oh yeah, I forgot you had that...");  
                              
        }
      } else if (player.ActiveInventory == iToiletPaper)
      {
        if(IsPlayerAbi)
        {
          player.Say("I don't need to wipe my arse right now.");
          if(cAbi.Room == cPaul.Room)
          {
            cPaul.Say("Huh?");
          } else if (cHamish.Room == cAbi.Room)
          {
            cHamish.Say("Uh...");
            WaitSeconds(1.1);
            cHamish.Say("Pardon?");
          }
        } else {                   
          cPaul.Say("Um..");
          WaitSeconds(0.3);
          cPaul.Say("Hey...");
          cPaul.FaceCharacter(cAbi);
          WaitSeconds(0.5);
          cAbi.Say("Yes...");
          WaitSeconds(0.2);
          cPaul.Say("Want this toilet paper?");
          WaitSeconds(0.8);
          cAbi.Say("Sure.");          
          cAbi.Say("");
          
          Give(cAbi, iToiletPaper);          
        }
      } else if (player.ActiveInventory == iMug)
      {
        if(IsPlayerAbi)
        {
          player.Say("That mug is empty.");
        } else {
          cPaul.FaceCharacter(cAbi);
          cPaul.Say("Hey Abi!");
          cAbi.FaceCharacter(cPaul);
          cAbi.Say("Yup?");
          cPaul.Say("Here's that mug back.");
          Give(cAbi, iMug);
          cAbi.Say("Cheers.");
          
        }
      } else if (player.ActiveInventory == iCoffeeBlack)
      {
        if(IsPlayerAbi)
        {
          cAbi.drink(iCoffeeBlack, iMug);   
        } else {
          cPaul.FaceCharacter(cAbi);
          cPaul.Say("Hey Abi!");
          cAbi.FaceCharacter(cPaul);
          cAbi.Say("Yup?");
          cPaul.Say("Coffee?");
          Give(cAbi, iCoffeeBlack);
          cAbi.Say("Thanks Paul.");
          
        }
           
      } else if (player.ActiveInventory == iCoffeeLatte)
      {
          if(IsPlayerAbi)
        {
          cAbi.drink(iCoffeeLatte, iMug);   
        } else {
          cPaul.FaceCharacter(cAbi);
          cPaul.Say("Hey Abi!");
          cAbi.FaceCharacter(cPaul);
          cAbi.Say("Yup?");
          cPaul.Say("Coffee?");
          Give(cAbi, iCoffeeLatte);
          cAbi.Say("Thanks Paul.");
          
        }
        
      } else if (player.ActiveInventory == iMilk)
      {
        if(IsPlayerAbi)
        {
          player.Say("I'm not going to drink the milk right out of the carton.");
          player.Say("What am I, an animal?");
        } else {
          cPaul.FaceCharacter(cAbi);
          cPaul.Say("Hey Abi!");
          cAbi.FaceCharacter(cPaul);
          cAbi.Say("Yup?");
          cPaul.Say("Milk?");
          Give(cAbi, iMilk);
          cAbi.Say("Thanks Paul.");
          
        }                       
      } else if (player.ActiveInventory == iMugMilk)
      {
           if(IsPlayerAbi)
        {
          
          cAbi.drink(iMugMilk, iMug);
        } else {
          cPaul.FaceCharacter(cAbi);
          cPaul.Say("Hey Abi!");
          cAbi.FaceCharacter(cPaul);
          cAbi.Say("Yup?");
          cPaul.Say("Milk?");
           Give(cAbi, iMugMilk);
          cAbi.Say("Thanks Paul.");
         
        }        
      } else if (player.ActiveInventory == iCakeSlice)
      {
        if(IsPlayerAbi)
        {
          cAbi.eatFood(iCakeSlice);
        } else {
          cPaul.FaceCharacter(cAbi);
          cPaul.Say("Hey Abi!");
          cAbi.FaceCharacter(cPaul);
          cAbi.Say("Yup?");
          cPaul.Say("Cake?");
          Give(cAbi, iCakeSlice);
          cAbi.Say("Thanks Paul.");
        }
      } else if (player.ActiveInventory == iPaperReam)
      {
        if(IsPlayerAbi)
        {
          cAbi.Say("I wish I knew origami,");
          cAbi.Say("so I could fold up little unicorns and leave them places,");
          cAbi.Say(String.Format("Like a total %s.", HandyHelper.generateSwear()));
        } else {
          cPaul.FaceCharacter(cAbi);
          cPaul.Say("Hey Abi!");
          cAbi.FaceCharacter(cPaul);
          cAbi.Say("Yup?");
          cPaul.Say("You want this ream of paper?");
          cAbi.Say("Why wouldn't I?");
          Give(cAbi, iPaperReam);          
        }
      } else {
        
      }
    
    EndCutscene();
    break;
  }
  verbUsed = 0;
  
  
}

static void Character_Interact::Ghost_interact()
{
switch (verbUsed)
  {
    case 0: //walk
      player.Walk(cGhostl.x, cGhostl.y+10);
    break;
    case 1://look
    player.FaceCharacter(cGhostl);
      if(IsPlayerAbi){    
        player.Say("Looks like Paul is chilling out in the next room.");
      } else {
        player.Say("Abi is standing around in the next room,");
        cPaul.angry();
        player.FaceDirection(eDirectionDown);
        player.Say("Staring into space like a weirdo...");
        cPaul.cool();
      }
    break;
    case 2://use
    
    break;
    case 3://talk
      player.FaceCharacter(cGhostl);
      if(IsPlayerAbi){
        StartCutscene(eSkipESCOrRightButton);
        player.Say("Paul.");
        WaitMouseKey(50);
        player.Say("PAUL!!");
        WaitMouseKey(40);
        cGhostl.Say("What?");
        EndCutscene();
      } else {
        StartCutscene(eSkipESCOrRightButton);
        player.Say("Abi!");
        WaitMouseKey(30);
        player.FaceDirection(eDirectionDown);
        player.Say("I don't think she can hear me...");
        EndCutscene();
      }
    break;
    case 4://move
      Canned.tooFar();
    break;
    case 5://fourletters
      Canned.fuckAnyone();
    break;
    case 6://take
      Canned.cantTake();
    break;
    case 7://inv
      player.FaceCharacter(cGhostl);
      lookAbiPaul("I'm not throwing it at him.",
                  "I'm not going to chuck this at her!");
      
    break;
  }
  verbUsed = 0;  
}

static void Character_Interact::Fly_interact()
{
switch (verbUsed)
  {
    case 0: //walk
 
    break;
    case 1://look
      player.FaceCharacter(cFlies);
      if(IsPlayerAbi)
      {
        player.Say("That little fly is pretty annoying!");
      } else {  
        cPaul.angry();
        player.Say("Pesky Fly!");
        cPaul.cool();
      }
    break;
    case 2://use
      Canned.noUsing();
    break;
    case 3://talk
      Canned.noTalking();
    break;
    case 4://move
      Canned.noMoving();
    break;
    case 5://fourletters
      Canned.fuckAnyone();
    break;
    case 6://take
      lookAbiPaul("I can't get it!","It's too fast!");
    break;
    case 7://inv
      Canned.wontWork();
    break;
  }
  verbUsed = 0;
  
}

static void Character_Interact::NPCpaul_interact()
{
switch (verbUsed)
{
  case 0: //walk
    player.Walk(245, 151);
  break;
  case 1://look
    //conditions on the 4th cutscene eg
    if(cutScenes[4] == 0)
    {
      cAbi.Say("Looks like Paul is still asleep!");
    } else if (cutScenes[4] == 1)
    {
      cAbi.Say("Paul's been pretty depressed since G-Man got pulled into the Einstein hole.");
    }
    //and so on...
  break;
  case 2://use
    Canned.noUsing();
  break;
  case 3://talk
    //goto dialogue for paul in bed still
    Canned.noTalking();
  break;
  case 4://move
    //try pushing him?
    Canned.noMoving();
  break;
  case 5://fourletters
    Canned.fuckAnyone(2, false);
  break;
  case 6://take
    Canned.cantTake();
  break;
  case 7://inv
    Canned.wontWork();
  break;
}
verbUsed = 0;  
}

static void Character_Interact::John_interact()
{
  cJohn.addHealth(10);

}


function fuckHamish()
{
  hamishWaitingToLeave = false;
  player.Say("Wait,");
  player.Walk(560, 174, eBlock);
  
  cHamish.Say("Um...");
  //abi grabs hamish's head and pulls him in for a kiss
  //opens up a dialog script
  dAbiFuckHamish.Start();

  
}

int hamishTalkCounter = 0;
static void Character_Interact::Hamish_interact()
{
  String toSay;
  switch (verbUsed)
{
  case 0: //walk
    player.Walk(245, 151);
  break;
  case 1://look    
     player.FaceCharacter(cHamish);
    if(cHamish.Room == 19)
    {
   
    Hamish.sayToIt("It's Hamish, the IT guy.", "Looks like some computer nerd guy.");
    cHamish.Say("That's HEAD of the IT department.");
    } else if (cHamish.Room == 14)
    {
      if(cHamish.Loop == 1)
      {
        lookAbiPaul("Looks like Hamish is taking a break.",
                    "That computer guy is going to the toilet.");
      } else if (cHamish.Loop == 3)
      {
        lookAbiPaul("Looks like Hamish is selecting a tasty treat.",
                    "That computer guy is checking out the drinks.");
      } else if (cHamish.Loop == 2)
      {
        lookAbiPaul("Looks like Hamish is heading back to the office.",
                    "That guy is going back to his computer room");
      }
    } else if (cHamish.Room == 17)
    {
      lookAbiPaul("Someone is in there.",
                  "There's a guy taking a dump in there.");
    } else {
      player.Say("It's Hamish.");
    }
  break;
  case 2://use
    Canned.noUsing();
  break;
  case 3://talk
    //goto dialogue for Hamish. he doesn't turn around right away.
    player.FaceCharacter(cHamish);
    Hamish.sayToIt("Hey Hamish!", "Hey, bro!");
    if(cHamish.Room == 19)
    {
      if(hamishTalkCounter==0)
      {      
        cHamish.Say("Don't talk to me before I've had my coffee!");
        hamishTalkCounter++;
        if(Game.DoOnceOnly("coffeeObjective"))
        {
          addObjective("Get Hamish a coffee.", player);
        }
      } else if (hamishTalkCounter ==1)
      {
        cHamish.Say("No.");
        hamishTalkCounter++;
      } else if (hamishTalkCounter == 2)
      {
        hamishTalkCounter = 0;
        if(hamishFacingScreen)
        {
          Hamish.hamishTurn();
        }
        cHamish.Say("Sorry, who are you again?");
        //goto first Hamish Dialogue
      }
    } else if (cHamish.Room == 17)
    {
      //goto toilet hamish dialogue
    } else {
      WaitMouseKey(100);
      player.Say("...Must be in a hurry.");
    }
  break;
  case 4://move (push)
    //try pushing him?
    if(cHamish.Room == 19)
    {
      cHamish.Say("Don't push me!");
      cHamish.Say("Push a push-pop!");
    } else {
      lookAbiPaul("He's too fast!",
                  "He's a speedy guy!");
    }
  break;
  case 5://fourletters
  //(2, false);
    //opens up a dialogue, only in the office or toilet rooms
    if(cHamish.Room == 19)
    {
      Hamish.hamishTurn();
    } else if(cHamish.Room == 12)
    {
      fuckHamish();
    }
    else {
      lookAbiPaul("He's too fast!",
                  "He's a speedy guy!");
    }   
  break;
  case 6://take
    Canned.cantTake();
  break;
  case 7://inv
          
    StartCutscene(eSkipESCOnly);
    player.FaceCharacter(cHamish);
    if(cHamish.Room == 19)
    {
      if(player.ActiveInventory == iKeyCard)
      {
        Hamish.sayToIt("Hey Hamish!","Hey bro!");
        Hamish.sayToIt("Want the keycard back?", "Check out this key-card!");
        cHamish.Say("How did you get this!?");
      } else if (player.ActiveInventory == iPaulsCard || player.ActiveInventory == iAbiCard)
      {
        Hamish.sayToIt("I'm not giving Hamish any money.",
                    "I reckon he gets paid enough doing whatever it is he does.");
        cHamish.Say("Righto, mate.");
      } else if (player.ActiveInventory == iToiletPaper)
      {
        lookAbiPaul("Hey Hamish!","Hey bro!");
        Hamish.sayToIt("How about some toilet paper?","Need some toilet roll?");
        cHamish.Say("Ha, ha. Very funny.");
      } else if (player.ActiveInventory == iMug)
      {
        Hamish.sayToIt("Hey Hamish!","Hey bro!");
        Hamish.sayToIt("Want this mug?","Want this?");
        if(hamishFacingScreen)
        {
          Hamish.hamishTurn();
        }
        cHamish.Say("What?");
        cHamish.Say("No, of course I don't!");
        Hamish.hamishTurn();
      } else if (player.ActiveInventory == iMugMilk)
      {
        Hamish.sayToIt("Hey Hamish!","Hey bro!");
        Hamish.sayToIt("How about a cup of milk?","Want some milk?");
        cHamish.Say("No, I'm lactose intolerant.");
        cHamish.Say("If I were to drink that...");
        if(hamishFacingScreen)
        {
          Hamish.hamishTurn();
        }
        cHamish.Say("There would be consequences.");
          Hamish.hamishTurn();
        
      } else if (player.ActiveInventory == iCoffeeLatte)
      {
        Hamish.sayToIt("Hey Hamish!","Hey bro!");
        Hamish.sayToIt("How about a cup of coffee?", "Want some coffee?");
        cHamish.Say("Oh yeah?");
          if(hamishFacingScreen)
        {
          Hamish.hamishTurn();
        }
        cHamish.Say("Oh, there's milk in there.");
        cHamish.Say("Actually, I'm lactose intolerant.");
        cHamish.Say("So, no thanks!");
        Hamish.hamishTurn();
        
      } else if (player.ActiveInventory == iCoffeeBlack)
      {
        Hamish.sayToIt("Hey Hamish!","Hey bro!");
        Hamish.sayToIt("How about a cup of coffee?", "Want some coffee?");
        cHamish.Say("Oh yeah?"); 
          if(hamishFacingScreen)
        {
          Hamish.hamishTurn();
        }
        cHamish.Say("Thanks.");
        //replace with 'give' function when making animation
        player.LoseInventory(iCoffeeBlack);
        
        Hamish_Conditions.giveCoffee(true);
        removeObjective("Get Hamish a coffee.",lAbiObjectives);
        cHamish.SCABS(69);
        //hamish drinks coffee
      } else if(player.ActiveInventory == iMilk){
         Hamish.sayToIt("Hamish!","Hey bro!");
        Hamish.sayToIt("Milk?", "Want some milk?");
        cHamish.Say("Ah-");
        cHamish.Say("I'm lactose intolerant.");
        cHamish.Say("If I drank that milk...");
          if(hamishFacingScreen)
        {
          Hamish.hamishTurn();
        }
        cHamish.Say("There would be consequences.");      
        Hamish.hamishTurn();
        cHamish.Say("Yep."); 
      } else if(player.ActiveInventory == iCakeSlice)
      {
        Hamish.sayToIt("I got you a slice of cake!",
                    "Hey guy, want this cake?");       
        Hamish.hamishTurn();
        if(IsPlayerAbi)
        {
          cHamish.SCABS(69);
          dHamishCake.Start();
        } else {
          cHamish.Say("I'm not going to just take cake");
          cHamish.Say("from some random.");
          Hamish.hamishTurn();
        }
      } else {

        if(IsPlayerAbi)
        {
          toSay = String.Format("I'm not giving Hamish %s!",player.ActiveInventory.Name);
         
        } else {
          toSay = String.Format("I'm not giving that guy %s!",player.ActiveInventory.Name);
        }
          Hamish.sayToIt(toSay, toSay);
          cHamish.Say("Thanks, I wouldn't want it anyway.");
          Hamish.sayToIt("I'm not offering it.","Well you can't have it.");
          cHamish.Say("I don't care.");
      }    
      
    } else if (cHamish.Room == 17)
    {
      //sean this needs to have more conditions for giving toilet paper, keycard etc
      if(IsPlayerAbi)
      {
        toSay = String.Format("Hey Hamish, want %s?",player.ActiveInventory.Name);
      } else {
        toSay = String.Format("Hey guy, want %s?",player.ActiveInventory.Name);
      }
      player.Say(toSay);
      toSay = String.Format("What possible use would I have for %s?",player.ActiveInventory.Name);
      cHamish.Say(toSay);
      
    } else {
      if(IsPlayerAbi)
      {
        toSay = String.Format("Hey Hamish, want %s?",player.ActiveInventory.Name);
      } else {
        toSay = String.Format("Hey guy, want %s?",player.ActiveInventory.Name);
      }
      player.Say(toSay);
      lookAbiPaul("I guess he's preoccupied.","Rude.");
    }
    EndCutscene();
  break;
}
verbUsed = 0; 
}


static void Character_Interact::Security_interact()
{

  switch (verbUsed)
  {
    case 0: //walk
    
      walkToAndFace(171, 138, eDirectionUpLeft, 
                    180, 150); 
    break;
    case 1://look
      player.FaceCharacter(cSecurity);
      lookAbiPaul("It's Vignesh, the security guard.", "Some security uncle.");
    break;
    case 2://use
      Canned.noUsing();
    break;
    case 3://talk
      player.FaceCharacter(cSecurity);
      if(IsPlayerAbi)
      {
        player.Say("Hi Vignesh.");
        cSecurity.FaceCharacter(player);
        cSecurity.Say("Hello, Abigail.");
        dAbiToVignesh.Start();
      } else {
        player.Say("Hey guy!");
        cSecurity.FaceCharacter(player);
        cSecurity.Say("Yes?");
        dPaulToVignesh.Start();
      }
    break;
    case 4://move
      Canned.noMoving();
    break;
    case 5://fourletters
      Canned.fuckAnyone();
    break;
    case 6://take
      Canned.cantTake();
    break;
    case 7://inv
      Canned.wontWork();
    break;
  }
  verbUsed = 0;
  
}