// new module script


function displayAlert(alertType theAlert, bool autoHide, InventoryItem* invItem)
{
  //create a series of icons for this, just change the image, make the fade in tween wonkier
  if(showAlerts)
  {  
  
    gAlert.Visible = true;    
    
    if(invItem == null)
    {
      gAlert.Transparency = 100;
      gAlert.TweenTransparency(0.8, 30, eEaseOutSineTween, eNoBlockTween);
    } else {
      gAlert.Transparency = 30;
    }
    switch (theAlert)
    {
      case eAlertPhoneCall:
      
        gAlert.X = 318;
        gAlert.Y = 163;
        alertIcon.Animate(98, 0, 1, eRepeat);
      break;
      case eAlertObjective:
        
        aObjective.Play(eAudioPriorityHigh, eOnce);
       
        gAlert.X =  player.x - 17 - Game.Camera.X;
        gAlert.Y = player.y - 70 - Game.Camera.Y ;
        alertIcon.Animate(79, 0, 4, eRepeat);
        gAlert.TweenPosition(1.0, gAlert.X, gAlert.Y - 30, eEaseOutCubicTween, eNoBlockTween);
      break;
      case eAlertInvPickup:
      
        aObjective.Play(eAudioPriorityHigh, eOnce);
        //alertIcon.NormalGraphic = invItem.cursorGraphic;
        alertIcon.NormalGraphic = invItem.Graphic;
        gAlert.X =  player.x - 17 - Game.Camera.X;
        gAlert.Y = player.y - 40 - Game.Camera.Y ;
        gAlert.TweenPosition(0.6, 315, 2, eEaseOutCubicTween, eNoBlockTween);
        gAlert.TweenTransparency(0.6, 100, eEaseOutSineTween, eNoBlockTween);
        
      break;
      
    }
    
    
    if(autoHide)
    {
      gAlert.TweenTransparency(0.2, 100, eEaseOutSineTween, eNoBlockTween, 1.8);
      
    }
  }
}

function hideAlert()
{
  gAlert.Visible = false;
  
}


/*********************************Objectives**************************************************/

function openObjectives(Character* which)
{
  if(which == cAbi)
  {
    lObjLabel.Text = "Abi's to-do list";
    lAbiObjectives.Visible = true;
    lPaulObjectives.Visible = false;
  } else {
    lObjLabel.Text = "Paul's to-do list";
    lAbiObjectives.Visible = false;
    lPaulObjectives.Visible = true;
  }
  
  //put an if else in here to open either abi or pauls to do list
   // IsGuiOnScreen = true;
    gIconbar.Visible = false;
    gHintBar.Visible = false;
    gHealth.Visible = false;    
    gObjectives.Visible = true;    
    gObjectives.Y = 210;
    gObjectives.TweenY(0.8, 0, eEaseInOutSineTween, eNoBlockTween, 0.1);
      SetTimer(1, 1000);
  
}

function closeObjectives()
{
  if(gObjectives.Visible)
  {
   // IsGuiOnScreen = false;
    gIconbar.Visible = true;
    gHintBar.Visible = true;
    gObjectives.Visible = false; 
  }
}

function addObjective(String text, Character* theCharacter)
{    
  //change this so default will go to th eplayer's listbox
  ListBox* theListbox;
  
  if(theCharacter == cPaul)
  {
    theListbox = lPaulObjectives;
  } else {
    theListbox = lAbiObjectives;
  }
  displayAlert(eAlertObjective, true);    
  theListbox.AddItem(text); 
}

function removeObjective(String text, ListBox* whichList)
{
  int itemIndex = 0;
  while (itemIndex < whichList.ItemCount)
  {
    if(whichList.Items[itemIndex] == text)
    {
      whichList.RemoveItem(itemIndex);
    }
    itemIndex++;
  }  
}