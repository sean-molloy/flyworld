// room script file

function toggleEyebrows()
{
  if(oJohnBrows.Frame == 3)
  {
    oJohnBrows.Animate(0, 5, eOnce, eNoBlock, eBackwards);
  } else {
    oJohnBrows.Animate(0, 5, eOnce, eNoBlock, eForwards);    
  }  
}

function JMSay(String johnSays)
{
  cJohnsMouth.SayAtSync(260, 60, 100, johnSays);
  //cJohnsMouth.SayAt(260, 60, 100, johnSays);
 // cJohnsMouth.SaySync(johnSays);
}

function room_AfterFadeIn()
{
  JMSay("&1 G'Day, Abigeil,");
  WaitSeconds(0.5);
  JMSay("&2 uh, now. Obviously,");
  JMSay("&3 there's some things we have to talk about.");
  JMSay("&4 um.");
  WaitSeconds(0.4);
  toggleEyebrows();
  JMSay("&5 So, there's been some new information from the prophesy about you,");
  toggleEyebrows();
  JMSay("&6 and it turns out that um,");
  JMSay("&7 yeah... ");
  WaitSeconds(0.2);
  toggleEyebrows();
  JMSay("&8 it doesn't want you here anymore! That prophecy!");
  toggleEyebrows();
  
}

function room_Load()
{
 // Speech.VoiceMode = eSpeechVoiceOnly;
 // SetGameOption(OPT_LIPSYNCTEXT, 1);
  oJohnBrows.SetView(10, 0, 0);
  cJohnsMouth.Baseline = 4;
  oJaw.Y = -4000;
  
  //game.lipsync_speed = 12;
 // game.text_speed = 12;
  
}

function room_Leave()
{
//  SetGameOption(OPT_LIPSYNCTEXT, 0);
}

function moveJaw()
{
 
 
  if(
    cJohnsMouth.Frame == 6 ||
    cJohnsMouth.Frame == 7 ||
    cJohnsMouth.Frame == 8 ||
    cJohnsMouth.Frame == 9 
  )
  {    
    
    oJaw.Y = 204;
    
  } else if(cJohnsMouth.Frame == 11)
  {
      
      oJaw.Y = 206;
  } else {
    oJaw.Y = -4000;
 
  }
 
}
int counter = 0;

int dryEyes = 70;
function jonBlink()
{
  counter++;
  if(counter == dryEyes)
  {
    oBlink.Visible = true;
    
  } else if (counter == dryEyes + 8)
  {
    oBlink.Visible = false;
    dryEyes = 70 + Random(100);
    counter = 0;
  }
}

function late_repeatedly_execute_always()
{
  moveJaw();
  jonBlink();
}

function room_RepExec()
{
  
}
