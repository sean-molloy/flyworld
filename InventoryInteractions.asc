// all Inventory Interactions




function Print(const string whatToPrint)
{
  DisplayAtY(150, whatToPrint);
}

String capitaliseSentence(String inputString)
{
  String firstLetter = inputString.Truncate(1);
  String capitalized = firstLetter.UpperCase();
  String sentence = inputString.Substring(1, inputString.Length);
  return capitalized.Append(sentence);
}

function replaceInvItem(InventoryItem* turnThis, InventoryItem* intoThis)
{
  int index;
  for (int i = 0; i < invCustom.ItemCount; i++) {
    if (invCustom.ItemAtIndex[i] == turnThis) index = i;
  }
  player.LoseInventory(turnThis);
  player.AddInventory(intoThis, index);
 }

function eatFood(this Character*, InventoryItem* eatWhat, int foodPoints, int drinkPoints, int healthPoints, 
                  InventoryItem* replacedWith)
{
  if(drinkPoints+this.GetProperty("bladder") > 4)
  {
    lookAbiPaul("I can't drink anymore.",
                "I'm completely full of fluid, and I cannot drink another drop.");
  } else if (foodPoints+ this.GetProperty("stomach") > 4)
  {
    lookAbiPaul("I'm full!","I'm so full of food!");
  } else {
  
    if(replacedWith)
    {
      replaceInvItem(eatWhat, replacedWith);
    } else {
      player.LoseInventory(eatWhat);
    }
    
    
    this.SetProperty("bladder",this.GetProperty("bladder")+ drinkPoints);
    this.SetProperty("stomach", this.GetProperty("stomach")+ foodPoints);
    this.addHealth(healthPoints);
  }
}


function inv_pills_look()
{
  
   if(IsPlayerAbi){
    Print("It's Paul's pills.");    
    Print( "You should always read the small print on these things!");
    Print("hmmm...");
    Print("'Do not combine with drugs or alcohol. May result in delerium, hallucinations.'");
    } else {
      Print("It's a jumbo size bottle of emotional stabilizing pills!");
    } 
}

function inv_pills_inv()
{
 
     if(player.ActiveInventory == iPaulsCard || player.ActiveInventory == iAbiCard)
    {
      displayInvLook("I don't want to mess with Paul's pills!",
                      "Crush them up for lines? Sounds like a bit of effort.");
    } else if(player.ActiveInventory == iPills)
    {
      Mouse.Mode = eModeInteract;
    } else {
      displayInvLook("I don't want to go messing with Paul's medication too much.",
                      "That won't do anything useful to the pills");
    } 
  
}

function inv_keyCard_look()
{
  displayInvLook( "It's the keycard to the stationery closet!",
                  "It's some kind of key-card.");
}
function inv_keyCard_inv()
{
  displayInvLook( "I'd better not mess with this keycard.",
                "That might wreck the key-card?");
}


function inv_paulsCard_look()
{
   String lookCard;
  if(IsPlayerAbi)
  {
      lookCard = String.Format("It's Paul's eftpos card. He has $%.2f.", PaulMoney);
    } else {
      lookCard = String.Format("It's my eftpos card. I have $%.2f.", PaulMoney);
    }
  
  Print(lookCard);
}

function inv_paulsCard_inv()
{
  if(player.ActiveInventory == iPaulsCard)
  {
    Mouse.Mode = eModeInteract;
  } else {
  displayInvLook("That'll only make it worse!",
                 "My card is fine without that.");
  }
}

function inv_abisCard_look()
{
    String lookCard;
  if(IsPlayerAbi)
  {
      lookCard = String.Format("It's my eftpos card. I have $%.2f.", AbiMoney);
  } else {
      lookCard = String.Format("It's Abi's eftpos card. She has $%.2f.", AbiMoney);
  }

  Print(lookCard);
}

function inv_abisCard_inv()
{
   if(player.ActiveInventory == iAbiCard)
  {
    Mouse.Mode = eModeInteract;
  } else {
    displayInvLook("Nah, that'll wreck it.",
                  "It'll probably piss off Abi if I break her card.");
  }
}

function inv_typewriter_look()
{
  displayInvLook("It's Paul's precious typewriter.",
                "It's my typewriter. I'm gonna write something amazing when I get round to it!");
  
}

function inv_typewriter_inv()
{
  if(player.ActiveInventory == iTypewriter)
  {
    Mouse.Mode = eModeInteract;
  } else {
    displayInvLook("I'd better not meddle with this old peice of crap.",
                    "Nah, that'll probably mess with the mechanism.");
  }
}

function  inv_BeeperAbi_look()
{
  showAbisBeeper();
}

function inv_BeeperAbi_inv()
{
  String thisString = String.Format("But this beeper is more fragile than a Tamagochi! %s might fuck it up!",player.ActiveInventory.Name);
  displayInvLook( thisString,
                  "If this beeper breaks while I have it, Abi will blame it on me!");
}


function inv_toiletP_look()
{
  displayInvLook( "It's a toilet roll.",
                  "A roll of toilet paper.");
  if(player.InventoryQuantity[iToiletPaper.ID]>1)
  {
    int amount = player.InventoryQuantity[iToiletPaper.ID];
    String toSay = String.Format("I've got %d of these!", amount);
    displayInvLook(toSay, toSay);
  }
}
function inv_toiletP_inv()
{
  String useWithToiletPaper = String.Format("I don't see how %s would be better wrapped in toilet paper.",player.ActiveInventory.Name);
  displayInvLook(useWithToiletPaper,
                "I might need the toilet paper later, for you know, it's traditional use.");
} 



function inv_mug_look()
{
  displayInvLook("It's a crappy mug from the Omnichron Staff room.",
                  "It's the mug Abi gave me, as present, I think...");
}


function inv_mug_inv()
{
  if(player.ActiveInventory == iMilk)
  {
    replaceInvItem(iMug, iMugMilk);
    player.LoseInventory(iMilk);
    aMilk.Play(eAudioPriorityHigh, eOnce);
  } else {
    String useWIthMug = String.Format("I don't think %s would go in the mug.", player.ActiveInventory.Name);
    displayInvLook(useWIthMug, useWIthMug);
  }
}

function inv_coffeeBlack_look()
{
  displayInvLook("A mug of black coffee.",
                "Abi gave me this black coffee. Looks shitty, but it was a nice gesture anyway.");
}




function inv_coffeeBlack_inv()
{
  if(player.ActiveInventory == iMilk)
  {
    aMilk.Play(eAudioPriorityHigh, eOnce);
    replaceInvItem(iCoffeeBlack, iCoffeeLatte);
    player.LoseInventory(iMilk);
  } else {
    String useWIthMug = String.Format("I'm not going to put %s in the coffee!", player.ActiveInventory.Name);
    displayInvLook(useWIthMug, useWIthMug);
  }
}

function inv_coffeeLatte_look()
{
  displayInvLook("A mug of coffee, with milk.",
                  "Abi gave me this coffee. I don't know how long she was carrying it around with her, it's gone cold. Still, it's the thought that counts!");
}

function inv_coffeeLatte_inv()
{
  String useWIthMug = String.Format("I'm not going to put %s in the coffee!", player.ActiveInventory.Name);
  displayInvLook(useWIthMug, useWIthMug);
}

function inv_milk_look()
{
  displayInvLook("Milk, the way nature intended it - lactated from the mucousy mammaries of a cow.","Moo milk!");
}

function inv_milk_inv()
{
  String useWIthMug = String.Format("I'm not going to put %s in the milk!", player.ActiveInventory.Name);
  displayInvLook(useWIthMug, useWIthMug);
}

function inv_mugMilk_inv()
{
  String useWIthMug = String.Format("I'm not going to put %s in the milk!", player.ActiveInventory.Name);
  displayInvLook(useWIthMug, useWIthMug);
}

function inv_mugMilk_look()
{
  displayInvLook("It's a mug of milk.",
                  "It's that old cup of warm milk Abi gave me.");
}

